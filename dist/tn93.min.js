!function(){"use strict";var L={"-":17,A:0,B:11,C:1,D:12,G:2,H:13,K:9,M:10,N:15,R:5,S:7,T:3,U:4,V:14,W:8,Y:6,a:0,b:11,c:1,d:12,g:2,h:13,k:9,m:10,n:15,r:5,s:7,t:3,u:4,v:14,w:8,y:6},O=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1],[0,0,0,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[1,1,0,0],[0,1,1,1],[1,0,1,1],[1,1,0,1],[1,1,1,0],[1,1,1,1],[1,1,1,1],[0,0,0,0]],y=[1,1,1,1,1,.5,.5,.5,.5,.5,.5,.5,1/3,1/3,1/3,1/3,.25,.25,0];function o(o,t,e){e||(e="RESOLVE");for(var r=Math.min(o.length,t.length),f=0,n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=0;i<4;i++)for(var a=0;a<r;a++){var c=L[o[a]||16],u=L[t[a]||16];if(c<4&&u<4)n[c][u]+=1;else{if(17==c||17==u){if("GAPMM"!=e)continue;if(17==c&&17==u)continue;17==c?c=15:u=15}if(c<4){if("SKIP"!=e&&0<y[u]){if("RESOLVE"==e&&O[u][c]){n[c][c]+=1;continue}for(var m=0;m<4;m++)O[u][m]&&(n[c][m]+=y[u])}}else if("SKIP"!=e)if(u<4){if(0<y[c]){if("RESOLVE"==e&&O[c][u]){n[u][u]+=1;continue}for(m=0;m<4;m++)O[c][m]&&(n[m][u]+=y[c])}}else if(norm=y[c]*y[u],0<norm){if("RESOLVE"==e){matched_count=0,positive_match=[!1,!1,!1,!1];for(m=0;m<4;m++)O[c][m]&&O[u][m]&&(matched_count++,positive_match[m]=!0);if(0<matched_count){norm2=1/matched_count;for(m=0;m<4;m++)positive_match[m]&&(n[m][m]+=norm2);continue}}for(m=0;m<4;m++)if(O[c][m])for(var h=0;h<4;h++)O[u][h]&&(n[m][h]+=norm)}}}var s=[0,0,0,0];for(c=0;c<4;c++)for(u=0;u<4;u++)s[c]+=n[c][u],s[u]+=n[c][u];var l=2/(s[0]+s[1]+s[2]+s[3]),v=(n[0][2]+n[2][0])*l,d=(n[1][3]+n[3][1])*l,p=1-((n[0][0]+n[1][1]+n[2][2]+n[3][3])*l+v+d);if(0==s[0]||0==s[1]||0==s[2]||0==s[3])v=1-2*(v+d)-p,d=1-2*p,f=0<v&&0<d?-.5*Math.log(v)-.25*Math.log(d):1;else{for(var M=1/(s[0]+s[1]+s[2]+s[3]),g=[0,0,0,0],E=0;E<4;E++)g[E]=s[E]*M;var S=g[0]+g[2],_=g[1]+g[3],x=2*g[0]*g[2]/S,R=2*g[1]*g[3]/_,V=2*(S*_-g[0]*g[2]*_/S-g[1]*g[3]*S/_);v=1-v/x-.5*p/S,d=1-d/R-.5*p/_,p=1-.5*p/_/S,f=-x*Math.log(v)-R*Math.log(d)-V*Math.log(p)}return f}"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports.tn93=o):self.tn93=o}();
